## 序言

陈老师的书是按照一些很古老的语言，比如C语言、Pascal语言、Fortran语言等过程语言来设计的，和今天的语言相比，编译器/解释器的实际工作环境已经发生了很大变化，有很多概念在今日的课程中已经消失了。所以我在重写的过程中会尽量按照Java和SQL的语法来写。

从我自己的认知来讲，不带宏的C++和不用设计模式的Java从语法特性到实用度上，都是比较完备的。过分追求新特性并非什么好事，为了利用特性而利用特性更是不可取。所以学习编译，大家千万不要抱着“弄个大新闻”的态度，琢磨一些奇奇怪怪的语法，这样不经深思熟虑的“新特性”一定会导致用着不顺、读着不通。

比如说Python，目前Python的第一作者已经考虑从类LL(1)的解析器更换到基于PEG的解析器。这条消息的意思就是本来只要顺序的考察几个单词的事情，这次需要把整个Python代码文件都加载进来才能解析了，解释器可以根据任意位置的符号来判断语法的语义。看起来似乎解释器的能力得到了极大的加强，其实这种解释器对于人类的脑力来说，要考虑的点更多，文法也会更加复杂，但是认真的说，能办到的事情并没有实质性的增加。

另外一方面，对于一种语言一定要有符合大部分人类认知的良定义。比如前两天闹得沸沸扬扬的小学数学题，类似于`30÷2(2+3)`这样的，这种写法比二义性更进一步。因为二义性可以在逻辑上给出一个良定义，这样的算式是给不出良定义的。类似的，如果即使能给出良定义，但是不符合大部分人的认知也不见得就好。比如这个算式`2 << 7 - 2 * 3`，一个不经常玩弄数学符号的人，他的直觉会如何判断位移符号的优先级呢？对于这种情况，还是多加几个括号，让更多人都能一目了然更好些吧。

语言这种东西，只是一个工具，简单准确是第一位的，足够简单准确才能方便学习；其后再去考虑怎么写出好用的功能，同时也要一直保持简单和准确的初始思路。

## 说明

如果只是希望快速的了解一些相关知识的话，推荐直接按照大编号看，忽略第二段小编号的文本；即只看1、2、3、4，忽略1.1、1.2、1.3这样的编号。

如果要深入学习代码优化的话，建议同时在手边备一本《离散数学及其应用》，里面的很多数理逻辑等价公式在辅助理解优化概念的时候很有用。

另外推荐使用Typora观看，使用其他markdown编辑器不保证所有字符都能正确显示。

绘图大部分采用了XMind ZEN、LibreOffice Draw，还有直接从Oracle文档中复制过来的。

### 各篇章说明

1.有限自动机：从数学概念有向图入手，给出状态转移图与有限自动机的定义，属于入门基本概念。

2.上下文无关文法：描述文法相关基本知识，给出表达式与语法树定义，也属于入门基本概念。

2.1 描述LL(1)文法的构造方法。

2.2 描述LR(k)文法的构造方法。

3.Lex与Parser构造：从实现角度出发，详细描述了词法分析器与与语法分析器的作用以及一些基本设计思路。

4.语义分析：结合实现，描述各种翻译器/编译器如何执行语言的命令操作。

4.1 详细说明各种三地址中间语言的特性。

4.2 描述属性文法原理与对应Parser构造方法。

4.3 符号表的数据结构与功能

5.代码优化的一般方法

## 推荐文档

1.IBM Developer：Yacc 与 Lex 快速入门

https://www.ibm.com/developerworks/cn/linux/sdk/lex/

2.Oracle Select子句状态转移图大全

https://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10002.htm#SQLRF01702

3.ANTLR 4 Maven plugin API

https://www.antlr.org/api/maven-plugin/latest/antlr4-mojo.html

4.让我们做个简单的解释器

https://linux.cn/article-9399-1.html?utm_source=index&utm_medium=more